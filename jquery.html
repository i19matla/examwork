<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jquery200.html</title>
    <link rel="stylesheet" href="examstyling.css">
    <script src="https://code.jquery.com/jquery-3.6.4.js"></script>

    <script src="01randomizedData200.js"></script> <!-- Variablename datasetOne200; -->
    <script src="02randomizedData200.js"></script> <!-- Variablename datasetTwo200; -->
</head>
<body>
    <header>
        
    </header>
    <main>
        <section id="webShopApp">
            
        </section>
    </main>
    <footer>

    </footer>
    <script src="01randomizedData200.js"></script>
    <script src="02randomizedData200.js"></script>
    <script>
        var originalUrl = "http://127.0.0.1:5501/jquery200.html?";
        var dataset = [];
        var header;
        console.log(window.location.href);
        if (window.location.href == "http://127.0.0.1:5501/jquery200.html") {
            window.location.href = "http://127.0.0.1:5501/jquery200.html?dataset=datasetOne200";
        } else {
            //
        }

        const currentUrl = window.location.href;
        const parametersUrl = new URL(currentUrl).searchParams;
        const parameters = new URLSearchParams(parametersUrl).values();
        const urlParameters = Array.from(parameters);
        console.log(urlParameters);

        if (urlParameters[0] == "datasetOne200") {
            dataset = datasetOne200;
            header = "jQuery-Dataset-Ett | jQuery-Dataset-Ett | jQuery-Dataset-Ett";
        } else if (urlParameters[0] == "datasetTwo200") {
            dataset = datasetTwo200;
            header = "jQuery-Dataset-Två | jQuery-Dataset-Två | jQuery-Dataset-Två";
        } else {
            header = "Något har gått fel.";
        }

        // var datasetOne200 imported
        // var datasetTwo200 imported
        var amountOfItems = datasetOne200.length;        
        
        $("header").append(`
            <h1 id="overAllHeader">${header}</h1>
            <div id="buttonArea">
                <button id="buttonSetTwo" onclick="changeToDataSetTwo()">Byt till: Dataset två</button>
                <button id="buttonSetOne" onclick="changeToDataSetOne()">Byt till: Dataset ett</button>
            </div>    
        `);
                
        for (let i = 0; i < amountOfItems; i++) {
            $("#webShopApp").append(
                `
                    <div class="itemContainer">
                        <h2 id="itemHeading${i}">${ dataset[i].itemHeading }</h2>
                        <figure>
                            <img id="itemImg${i}" src="${dataset[i].image.imgSrcUrl}" alt="${dataset[i].image.imgAltText}" width="200" height="280" title="Vacker bild dataset 1">
                            <figcaption id="itemFigText${i}">
                                ${dataset[i].image.itemImageText}
                            </figcaption>
                        </figure>
                        <p id="itemPrice${i}" class="price">${dataset[i].itemPrice} ${dataset[i].currency}</p>
                        <p id="itemDescr${i}" class="itemDescr">${dataset[i].itemDescription}</p>
                        <small id="artNr${i}">Artikel "${dataset[i].articleNr}"</small>
                    </div>
                `
            );
        }
        function changeToDataSetTwo() {
            window.location.href = originalUrl + "dataset=datasetTwo200";
        }

        function changeToDataSetOne() {
            window.location.href = originalUrl + "dataset=datasetOne200";
        }
        
    </script>
</body>
</html>