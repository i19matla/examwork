<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10 Vue pilot application</title>
    <link rel="stylesheet" href="examstyling.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
</head>
<body>
    
    <script src="01randomizedData200.js"></script> <!-- Variablename: datasetOne200 -->
    <script src="02randomizedData200.js"></script> <!-- Variablename: datasetTwo200 -->
    <script>
        let minApp = Vue.createApp({
            template: `
            <header>
                <h1 id="overAllHeader">{{ activeHeaderHeading }}</h1>
                <div id="buttonArea">
                    <button id="buttonSetTwo" @click="changeToDataSetTwo()">Byt till: Dataset tv책</button>
                    <button id="buttonSetOne" @click="changeToDataSetOne()">Byt till: Dataset ett</button>
                </div>
            </header>
            <main>
                <section id="webShopApp">
                    <div v-for="(component, loopNr) in amountOfComponents" :key="loopNr">
                        <div class="itemContainer">
                            <h2>{{ data[loopNr].itemHeading }}</h2>
                            <figure>
                                <img :src="data[loopNr].image.imgSrcUrl" :alt="data[loopNr].image.imgAltText" :title="data[loopNr].image.itemImageTitle" width="200" height="280">
                                <figcaption>
                                    {{ data[loopNr].image.itemImageText }}
                                </figcaption>
                            </figure>
                            <p class="price">{{ data[loopNr].itemPrice }} {{ data[loopNr].currency }}</p>
                            <p class="itemDescr">{{ data[loopNr].itemDescription }}</p>
                            <small class="artNr">Artikel "{{ data[loopNr].articleNr }}"</small>
                        </div>
                    </div>
                </section>
            </main>
            <footer>

            </footer>
            `,
            data() {
                return {
                    amountOfComponents: this.theLength,
                    activeHeaderHeading: this.activeHeaderHeading,
                    data: this.theDataSet,
                }
            },
            methods: {
                changeToDataSetTwo() {
                    localStorage.setItem("vueTimeOne", Date.now());
                    window.location.href = "http://127.0.0.1:5501/vue200.html?dataset=datasetTwo200";
                },
                changeToDataSetOne() {
                    localStorage.setItem("vueTimeOne", Date.now());
                    window.location.href = "http://127.0.0.1:5501/vue200.html?dataset=datasetOne200";
                }
            },
            beforeCreate() {
                const urlSearchParams = new URLSearchParams(window.location.search);
                const parameters = Object.fromEntries(urlSearchParams.entries());
                console.log(parameters.dataset);
                if (window.location.href == "http://127.0.0.1:5501/vue200.html" || window.location.href == "http://127.0.0.1:5501/vue200.html?dataset=datasetOne200") {
                    this.activeHeaderHeading = 'Vue-Dataset-Ett | Vue-Dataset-Ett | Vue-Dataset-Ett';
                    this.theDataSet = datasetOne200;
               } else if (window.location.href == "http://127.0.0.1:5501/vue200.html?dataset=datasetTwo200") {
                    this.activeHeaderHeading = 'Vue-Dataset-Tv책 | Vue-Dataset-Tv책 | Vue-Dataset-Tv책';
                    this.theDataSet = datasetTwo200;
                }
                this.theLength = datasetOne200.length;
            },
            created() {
                //
            }
        });

        minApp.mount('body');
    </script>
</body>
</html>