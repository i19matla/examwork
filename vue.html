<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>09 Vue pilot application</title>
    <link rel="stylesheet" href="examstyling.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
</head>
<body>
    <script src="dataset1.js"></script>
    <script src="dataset2.js"></script>
    <script src="workingMeasureexperiment.js"></script>
    <script>
        let minApp = Vue.createApp({
            template: `
            <header>
                <h1 id="overAllHeader">{{ activeHeaderHeading }}</h1>
                <div id="buttonArea">
                    <button id="buttonSetTwo" @click="changeToDataSetTwo">Byt till: Dataset två</button>
                    <button id="randomizeNewOrder" onclick="itemNrRandomizer()">Slumpa fram ny ordning för båda dataseten</button>
                    <button id="buttonSetOne" @click="changeToDataSetOne()">Byt till: Dataset ett</button>
                </div>
            </header>
            <main>
                <section id="webShopApp">
                    <div v-for="(component, loopNr) in amountOfComponents" :key="loopNr">
                        <div class="itemContainer">
                            <h2>{{ this.data[this.itemNr[loopNr]].itemHeading }}</h2>
                            <figure>
                                <img :src="data[itemNr[loopNr]].image.imgSrcUrl" :alt="data[itemNr[loopNr]].image.imgAltText" :title="data[itemNr[loopNr]].image.itemImageTitle" width="200" height="280">
                                <figcaption>
                                    {{ data[itemNr[loopNr]].image.itemImageText }}
                                </figcaption>
                            </figure>
                            <p class="price">{{ data[itemNr[loopNr]].itemPrice }} {{ data[itemNr[loopNr]].currency }}</p>
                            <p class="itemDescr">{{ data[itemNr[loopNr]].itemDescription }}</p>
                            <small class="artNr">Artikel "{{ data[itemNr[loopNr]].articleNr }}"</small>
                        </div>
                    </div>
                </section>
            </main>
            <footer>

            </footer>
            `,
            data() {
                return {
                    amountOfComponents: 1000,
                    headerHeadingOne: 'Vue-Dataset-Ett | Vue-Dataset-Ett | Vue-Dataset-Ett',
                    headerHeadingTwo: 'Vue-Dataset-Två | Vue-Dataset-Två | Vue-Dataset-Två',
                    activeHeaderHeading: 'Vue-Dataset-Ett | Vue-Dataset-Ett | Vue-Dataset-Ett',
                    data: datasetOne,
                }
            },
            methods: {
                itemNrRandomizer() {
                    for (let i = 0; i < 1000; i++) {
                        this.itemNr[i] = Math.floor((Math.random() * 10));
                    }
                    console.log("Nya värden från parent " + this.itemNr);
                },
                changeToDataSetTwo() {
                    this.data = datasetTwo;
                    this.activeHeaderHeading = this.headerHeadingTwo;
                },
                changeToDataSetOne() {
                    this.data = datasetOne;
                    this.activeHeaderHeading = this.headerHeadingOne;
                }
            },
            beforeCreate() {
                this.itemNr = [];
                for (let i = 0; i < 1000; i++) {
                    this.itemNr[i] = Math.floor((Math.random() * 20));
                }
                localStorage.setItem("timeBeforCreate", Date.now());
            },
            created() {
                //
            }
        });

        minApp.mount('body');
    </script>
</body>
</html>